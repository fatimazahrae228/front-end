<body>
  

<!-- Barre de recherche -->
<div class="search-bar">
  <input type="text" [(ngModel)]="rechercheCours.titre" placeholder="Rechercher par titre">

  <select [(ngModel)]="rechercheCours.filiere">
    <option value="">Toutes les filières</option>
    <option>SMA</option><option>SMI</option><option>SMP</option>
    <option>SMC</option><option>SVI</option><option>STU</option>
  </select>

  <select [(ngModel)]="rechercheCours.niveau">
    <option value="">Tous les niveaux</option>
    <option>S1</option><option>S2</option><option>S3</option>
    <option>S4</option><option>S5</option><option>S6</option>
  </select>

  <select [(ngModel)]="rechercheCours.type">
    <option value="">Tous les types</option>
    <option>Gratuit</option><option>Payant</option>
  </select>

  <select [(ngModel)]="rechercheCours.documentType">
    <option value="">Tous les types de document</option>
    <option>Cours</option><option>TD</option><option>Examen</option>
  </select>

  <button (click)="appliquerFiltre()"><mat-icon>search</mat-icon></button>
</div>

<ul>
<li *ngFor="let cours of coursFiltresAppliques" class="cours-item">
  <div class="info-container">
    <div class="cours-info">
      <!-- Format: [Titre] - [Filière]/[Niveau]/ [Type] ([Prix]) [DocumentType] -->
      <strong>{{ cours.titre }}</strong> - {{ cours.filiere }}/{{ cours.niveau }}/ 
      {{ cours.documentType }} - {{ cours.type }} (<span *ngIf="cours.type === 'Payant'">{{ cours.prix }} DH</span>) 
    </div>

    <div class="actions">
      <!-- Bouton Payer conditionnel -->
    <div class="actions">
  <button *ngIf="cours.type === 'Payant' && !cours.paid" 
        class="payer-button" 
        (click)="openModal()">
 Payer
</button>
<div class="modal-backdrop" *ngIf="showModal">
  <div class="modal-content">
    <div class=container>
    <p>Veuillez vous inscrire pour effectuer le paiement</p>
   <a href="/inscrire">Inscrire</a>
  </div></div></div>


</div>



      <!-- Dans la boucle *ngFor pour chaque cours -->
<div *ngIf="cours.type === 'Payant'">
  <!-- Si non payé -->
  <div *ngIf="!cours.paid" class="payment-section">
    
    <div class="payment-buttons">
      
      
      <div #paypalContainer [id]="'paypal-container-'+cours.id" class="paypal-container"></div>
    </div>
  </div>
  
  <!-- Si payé -->
  <div *ngIf="cours.paid" class="course-content">
    <button (click)="ouvrirPdf(cours.pdfUrlView)" class="access-button">
      Accéder au cours
    </button>
  </div>
</div>
 

<div class="actions">
<div class="like">
<mat-icon
  (click)="toggleLike(cours.id)"
  [ngStyle]="{
    'color': likedCourses[cours.id] ? 'red' : 'gray',
    'font-size': '32px',
    'cursor': 'pointer',
  }"
>
thumb_up
</mat-icon>
 

<span>{{ likesCount[cours.id] || 0 }}</span>
</div>
 
 

    <div class="ad">
  <!-- Si le cours est gratuit OU déjà payé -->
 <ng-container *ngIf="cours.type === 'Gratuit' || cours.paid">
  <button (click)="ouvrirPdf(cours.pdfUrlView)">
    <mat-icon>visibility</mat-icon>
  </button>
  
</ng-container>


  <!-- Si le cours est payant et non encore payé -->
  <ng-container *ngIf="cours.type === 'Payant' && !cours.paid">
    <button (click)="afficherAlerte()">
      <mat-icon>visibility</mat-icon>
    </button>
   
 

  </ng-container>
</div>

  </div>
  </div>



